<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>History Quiz — All Continents</title>
  <style>
    *{box-sizing:border-box;font-family:'Georgia','Segoe UI',Arial,serif}
    body{background:linear-gradient(135deg, #d4a574 0%, #c09060 100%);color:#333;margin:0;padding:0;min-height:100vh}
    .container{max-width:900px;margin:0 auto;padding:0}
    header{text-align:center;padding:40px 20px 20px;background:transparent}
    header h1{margin:0;font-size:3.5em;color:#8b6f47;text-shadow:2px 2px 4px rgba(0,0,0,0.2);font-weight:700;letter-spacing:2px}
    header p{display:none}
    .landing{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:80vh;padding:40px 20px;text-align:center}
    .menu-title{font-size:2em;color:#8b6f47;margin-bottom:24px;text-transform:uppercase;letter-spacing:2px;text-align:center}
    .scroll-banner{background:#d4c4a8;padding:40px 60px;border-radius:12px;box-shadow:0 8px 16px rgba(0,0,0,0.3);position:relative;margin:20px 0;transform:rotate(-1deg)}
    .scroll-banner::before{content:'';position:absolute;top:-10px;left:10px;width:20px;height:20px;background:#d4c4a8;border-radius:50%}
    .scroll-banner::after{content:'';position:absolute;bottom:-10px;right:10px;width:20px;height:20px;background:#d4c4a8;border-radius:50%}
    .scroll-text{font-size:2.2em;color:#8b6f47;font-weight:700;letter-spacing:3px;margin:0;text-transform:uppercase}
    #startBtn{background:linear-gradient(135deg, #c9a961 0%, #a89860 100%);color:#fff;border:none;padding:20px 60px;border-radius:8px;cursor:pointer;font-size:1.6em;font-weight:700;text-transform:uppercase;letter-spacing:2px;box-shadow:0 6px 12px rgba(0,0,0,0.3);transition:transform 0.2s,box-shadow 0.2s;margin-top:30px}
    #startBtn:hover{transform:scale(1.05);box-shadow:0 8px 16px rgba(0,0,0,0.4)}
    #startBtn:active{transform:scale(0.98)}
    .controls{background:#fff;border-radius:8px;padding:32px;margin:40px auto;max-width:700px;box-shadow:0 4px 12px rgba(0,0,0,0.15)}
    #startQuizBtn{background:linear-gradient(135deg, #c9a961 0%, #a89860 100%);padding:12px 40px;font-size:1.1em;font-weight:700;text-transform:uppercase;margin-top:20px;display:block;margin-left:auto;margin-right:auto}
    .control-row{margin:20px 0;display:flex;flex-direction:column;align-items:flex-start;gap:12px}
    .control-row label{font-weight:700;color:#8b6f47;font-size:1.1em}
    .checkboxes{display:flex;flex-wrap:wrap;gap:12px}
    .checkboxes label{margin-right:0;font-weight:normal;color:#333}
    .radio{display:flex;gap:16px;flex-wrap:wrap}
    .radio label{margin-right:0;font-weight:normal;color:#333}
    #numQuestions{padding:8px 12px;border:1px solid #ddd;border-radius:6px;font-size:1em}
    .back-btn{background:#8b6f47;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-weight:600;margin-bottom:16px}
    .back-btn:hover{background:#6f5935}
    .hidden{display:none}
    .quiz,.results{background:#fff;border-radius:8px;padding:16px;margin-top:16px;box-shadow:0 2px 8px rgba(14,14,14,0.06);margin:40px auto;max-width:900px}
    .card{padding:12px;border:1px solid #eee;border-radius:6px}
    .question{font-size:1.1rem;margin-bottom:12px}
    .choices{display:flex;flex-direction:column;gap:8px}
    .choice{padding:10px;border-radius:6px;border:1px solid #ddd;cursor:pointer;background:#fafafa}
    .choice.correct{background:#d1fae5;border-color:#10b981}
    .choice.wrong{background:#fee2e2;border-color:#ef4444}
    .nav{margin-top:12px}
    #progress{font-size:.95rem;margin-bottom:8px;color:#374151}
    #timer{font-size:1.2rem;font-weight:bold;margin-bottom:12px;padding:8px 12px;border-radius:6px;display:inline-block;background:#f0f0f0}
    #timer.warning{background:#ffd700;color:#d97706}
    #timer.danger{background:#ef4444;color:#fff}
    footer{margin-top:18px;color:#6b7280;text-align:center;padding:20px}
    button[disabled]{opacity:.6;cursor:not-allowed}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>HISTORY QUIZ</h1>
    </header>

    <section class="landing" id="landing">
      <div class="scroll-banner">
        <p class="scroll-text">Test Your Knowledge</p>
      </div>
      <button id="startBtn">Play</button>
    </section>

    <section class="controls hidden" id="controls">
      <h2 class="menu-title">Select Your Quiz</h2>
      <button class="back-btn" id="backBtn">← Back</button>
      <div class="control-row">
        <label><strong>Continents:</strong></label>
        <div class="checkboxes">
          <label><input type="checkbox" value="Africa" checked> Africa</label>
          <label><input type="checkbox" value="Asia" checked> Asia</label>
          <label><input type="checkbox" value="Europe" checked> Europe</label>
          <label><input type="checkbox" value="North America" checked> North America</label>
          <label><input type="checkbox" value="South America" checked> South America</label>
          <label><input type="checkbox" value="Oceania" checked> Oceania</label>
        </div>
      </div>

      <div class="control-row">
        <label><strong>Difficulty:</strong></label>
        <div class="radio">
          <label><input type="radio" name="difficulty" value="easy" checked> Easy</label>
          <label><input type="radio" name="difficulty" value="medium"> Medium</label>
          <label><input type="radio" name="difficulty" value="hard"> Hard</label>
        </div>
      </div>

      <div class="control-row">
        <label><strong>Number of questions:</strong></label>
        <select id="numQuestions">
          <option value="5">5</option>
          <option value="10" selected>10</option>
          <option value="15">15</option>
          <option value="20">20</option>
        </select>
      </div>

      <div class="control-row">
        <button id="startQuizBtn">Start Quiz</button>
      </div>
    </section>

    <section class="quiz hidden" id="quiz">
      <div id="progress">Question <span id="current">0</span> / <span id="total">0</span> | <span id="timer">--</span></div>
      <div id="questionBox" class="card">
        <div id="questionText" class="question"></div>
        <div id="choices" class="choices"></div>
      </div>
      <div class="nav">
        <button id="nextBtn" disabled>Next</button>
      </div>
    </section>

    <section class="results hidden" id="results">
      <h2>Results</h2>
      <div id="summary"></div>
      <button id="restartBtn">Play Again</button>
    </section>

    <footer>
    </footer>
  </div>

  <script>
let allQuestions = []
let quiz = { questions: [], current: 0, score: 0, answers: [] }
let timerInterval = null
const TIMER_DURATIONS = { easy: 20, medium: 15, hard: 10 }

// All questions data embedded inline
const QUIZ_DATA = [
  {"continent":"Africa","region":"North Africa","difficulty":"easy","question":"Which ancient civilization built the pyramids at Giza?","choices":["Ancient Egypt","Carthage","Nubia","Axum"],"answer":"Ancient Egypt"},
  {"continent":"Africa","region":"West Africa","difficulty":"easy","question":"Which empire was famous for its wealth in gold and was located in present-day Mali?","choices":["Mali Empire","Songhai Empire","Ghana Empire","Meroe Kingdom"],"answer":"Mali Empire"},
  {"continent":"Africa","region":"East Africa","difficulty":"medium","question":"Which ancient trading city on the Swahili coast became wealthy through trade with Arabia and India?","choices":["Kilwa","Cairo","Mompox","Zanzibar"],"answer":"Kilwa"},
  {"continent":"Africa","region":"Southern Africa","difficulty":"medium","question":"Who led the Zulu people to create a powerful kingdom in the early 19th century?","choices":["Shaka","Mansa Musa","Nelson","Lalibela"],"answer":"Shaka"},
  {"continent":"Africa","region":"North Africa","difficulty":"hard","question":"Which Carthaginian general famously crossed the Alps to invade Italy during the Second Punic War?","choices":["Hannibal","Scipio","Hasdrubal","Mago"],"answer":"Hannibal"},
  {"continent":"Africa","region":"East Africa","difficulty":"hard","question":"Which medieval Ethiopian king is traditionally associated with the rock-hewn churches of Lalibela?","choices":["Gebre Mesqel Lalibela","Haile Selassie","Ezana","Menelik II"],"answer":"Gebre Mesqel Lalibela"},
  {"continent":"Asia","region":"East Asia","difficulty":"easy","question":"Which dynasty built the majority of the Great Wall of China that we see today?","choices":["Ming","Han","Tang","Qin"],"answer":"Ming"},
  {"continent":"Asia","region":"South Asia","difficulty":"easy","question":"Which empire is known for spreading Buddhism across much of South Asia and beyond under Emperor Ashoka?","choices":["Maurya Empire","Gupta Empire","Mughal Empire","Chola Empire"],"answer":"Maurya Empire"},
  {"continent":"Asia","region":"Southeast Asia","difficulty":"medium","question":"Which Khmer temple complex in present-day Cambodia is the largest religious monument in the world?","choices":["Angkor Wat","Borobudur","Bagan","Ayutthaya"],"answer":"Angkor Wat"},
  {"continent":"Asia","region":"Central Asia","difficulty":"medium","question":"Which leader created a vast empire across Asia in the 13th century, known for his horse-mounted armies?","choices":["Genghis Khan","Tamerlane","Kublai Khan","Nader Shah"],"answer":"Genghis Khan"},
  {"continent":"Asia","region":"East Asia","difficulty":"hard","question":"Which Japanese period (1185–1333) is marked by the dominance of samurai and the establishment of the first shogunate?","choices":["Kamakura period","Heian period","Azuchi–Momoyama","Muromachi period"],"answer":"Kamakura period"},
  {"continent":"Asia","region":"South Asia","difficulty":"hard","question":"Which Persian origin dynasty established the Mughal Empire in India in the 16th century?","choices":["Babur's dynasty","Safavid","Ottoman","Maurya"],"answer":"Babur's dynasty"},
  {"continent":"Europe","region":"Western Europe","difficulty":"easy","question":"Which event in 1066 led to Norman rule in England?","choices":["Battle of Hastings","Magna Carta","Great Fire of London","English Civil War"],"answer":"Battle of Hastings"},
  {"continent":"Europe","region":"Eastern Europe","difficulty":"easy","question":"Which empire was ruled by tsars and ended after the 1917 revolution?","choices":["Russian Empire","Ottoman Empire","Austro-Hungarian Empire","Byzantine Empire"],"answer":"Russian Empire"},
  {"continent":"Europe","region":"Southern Europe","difficulty":"medium","question":"Which ancient civilization famously built the Colosseum and aqueducts?","choices":["Roman Empire","Greek City-States","Etruscans","Byzantium"],"answer":"Roman Empire"},
  {"continent":"Europe","region":"Northern Europe","difficulty":"medium","question":"Which seafaring Norse people explored and settled Iceland, Greenland, and reached North America?","choices":["Vikings","Huns","Saxons","Franks"],"answer":"Vikings"},
  {"continent":"Europe","region":"Western Europe","difficulty":"hard","question":"Which treaty signed in 1648 ended the Thirty Years' War and helped establish the modern state system in Europe?","choices":["Peace of Westphalia","Treaty of Versailles","Treaty of Utrecht","Treaty of Tordesillas"],"answer":"Peace of Westphalia"},
  {"continent":"Europe","region":"Eastern Europe","difficulty":"hard","question":"Which medieval empire preserved much of Roman law and Greek scholarship in its capital, Constantinople?","choices":["Byzantine Empire","Holy Roman Empire","Ottoman Empire","Kievan Rus'"],"answer":"Byzantine Empire"},
  {"continent":"North America","region":"Caribbean & Central America","difficulty":"easy","question":"Which civilization built the stepped pyramids at Chichén Itzá?","choices":["Maya","Aztec","Inca","Olmec"],"answer":"Maya"},
  {"continent":"North America","region":"Mesoamerica","difficulty":"easy","question":"Which empire had its capital at Tenochtitlán before Spanish conquest?","choices":["Aztec","Maya","Inca","Toltec"],"answer":"Aztec"},
  {"continent":"North America","region":"United States","difficulty":"medium","question":"Which document, adopted in 1776, declared independence from Britain?","choices":["Declaration of Independence","Bill of Rights","Federalist Papers","Magna Carta"],"answer":"Declaration of Independence"},
  {"continent":"North America","region":"Canada","difficulty":"medium","question":"Which Indigenous polity in the Great Lakes region formed a confederacy known as the Iroquois or Haudenosaunee?","choices":["The Iroquois Confederacy","The Aztec League","The Cherokee Nation","The Sioux Alliance"],"answer":"The Iroquois Confederacy"},
  {"continent":"North America","region":"United States","difficulty":"hard","question":"Which U.S. Supreme Court decision in 1857 denied citizenship to African Americans and inflamed sectional tensions?","choices":["Dred Scott v. Sandford","Plessy v. Ferguson","Brown v. Board of Education","Marbury v. Madison"],"answer":"Dred Scott v. Sandford"},
  {"continent":"North America","region":"Caribbean & Central America","difficulty":"hard","question":"Which 19th-century leader led independence movements across much of Spanish South America and had campaigns in the north (Bolivar)?","choices":["Simón Bolívar","José de San Martín","Miguel Hidalgo","Toussaint Louverture"],"answer":"Simón Bolívar"},
  {"continent":"South America","region":"Andes","difficulty":"easy","question":"Which empire built Machu Picchu in the Andes?","choices":["Inca Empire","Muisca","Tiahuanaco","Chavín"],"answer":"Inca Empire"},
  {"continent":"South America","region":"Amazon","difficulty":"easy","question":"Which European power colonized most of Brazil?","choices":["Portugal","Spain","France","Netherlands"],"answer":"Portugal"},
  {"continent":"South America","region":"Southern Cone","difficulty":"medium","question":"Which 19th-century Argentine leader is associated with unifying the country and serving as its first president?","choices":["Bartolomé Mitre","San Martín","Perón","Artigas"],"answer":"Bartolomé Mitre"},
  {"continent":"South America","region":"Andes","difficulty":"medium","question":"Which leader led forces to independence in the southern part of South America (Argentina/Chile)?","choices":["José de San Martín","Simón Bolívar","Antonio José de Sucre","Bernardo O'Higgins"],"answer":"José de San Martín"},
  {"continent":"South America","region":"Amazon","difficulty":"hard","question":"Which pre-Columbian culture in present-day Colombia was renowned for gold-working and the legend of El Dorado?","choices":["Muisca","Tiwanaku","Mapuche","Chibcha"],"answer":"Muisca"},
  {"continent":"South America","region":"Southern Cone","difficulty":"hard","question":"Which 20th-century military dictatorship in Argentina was responsible for the 'Disappeared' during the Dirty War?","choices":["National Reorganization Process","Pinochet regime","Brazilian military government","Peruvian Sendero"],"answer":"National Reorganization Process"},
  {"continent":"Oceania","region":"Australia","difficulty":"easy","question":"Which people inhabited Australia for tens of thousands of years before European arrival?","choices":["Aboriginal Australians","Maori","Samoans","Tongans"],"answer":"Aboriginal Australians"},
  {"continent":"Oceania","region":"Polynesia","difficulty":"easy","question":"Which navigators from Polynesia settled and named New Zealand Aotearoa?","choices":["Māori","Aboriginal Australians","Fijians","Samoans"],"answer":"Māori"},
  {"continent":"Oceania","region":"Australia","difficulty":"medium","question":"Which event in 1901 created the Commonwealth of Australia?","choices":["Federation of Australia","Australian Gold Rush","Eureka Rebellion","Anzac Landing"],"answer":"Federation of Australia"},
  {"continent":"Oceania","region":"Melanesia","difficulty":"medium","question":"Which European explorer is credited with mapping parts of the Pacific including New Guinea in the 16th century?","choices":["Alvaro de Saavedra","James Cook","Abel Tasman","Ferdinand Magellan"],"answer":"Alvaro de Saavedra"},
  {"continent":"Oceania","region":"Polynesia","difficulty":"hard","question":"Which treaty in 1840 between some Māori chiefs and the British Crown is a foundational document for New Zealand?","choices":["Treaty of Waitangi","Treaty of Tordesillas","Treaty of Versailles","Anglo-Maori Accord"],"answer":"Treaty of Waitangi"},
  {"continent":"Oceania","region":"Melanesia","difficulty":"hard","question":"Which World War II campaign in the Pacific involved heavy fighting in places like Guadalcanal?","choices":["Guadalcanal Campaign","Battle of Midway","Battle of the Coral Sea","Leyte Gulf"],"answer":"Guadalcanal Campaign"},

  // Additional questions to reach ~100 total
  {"continent":"Africa","region":"North Africa","difficulty":"easy","question":"The Nile River primarily flows through which country in ancient times known for its pharaohs?","choices":["Egypt","Ghana","Ethiopia","Nigeria"],"answer":"Egypt"},
  {"continent":"Africa","region":"West Africa","difficulty":"medium","question":"Which West African city was a center of learning and trade in the medieval period, home to the University of Sankore?","choices":["Timbuktu","Mali","Gao","Kumbi Saleh"],"answer":"Timbuktu"},
  {"continent":"Africa","region":"East Africa","difficulty":"easy","question":"Which trading language and culture developed on the East African coast, blending African and Arab influences?","choices":["Swahili","Amharic","Zulu","Hausa"],"answer":"Swahili"},
  {"continent":"Africa","region":"Southern Africa","difficulty":"hard","question":"Which kingdom, known for its stone ruins at Great Zimbabwe, flourished in southern Africa between the 11th and 15th centuries?","choices":["Great Zimbabwe","Meroe","Aksum","Benin"],"answer":"Great Zimbabwe"},
  {"continent":"Africa","region":"North Africa","difficulty":"medium","question":"Which ancient city was the center of the Carthaginian civilization before Roman conquest?","choices":["Carthage","Alexandria","Cairo","Tunis"],"answer":"Carthage"},
  {"continent":"Africa","region":"West Africa","difficulty":"hard","question":"Which ruler of the Mali Empire made a famous pilgrimage to Mecca in 1324 and displayed enormous wealth?","choices":["Mansa Musa","Sundiata","Sunni Ali","Askia the Great"],"answer":"Mansa Musa"},
  {"continent":"Asia","region":"East Asia","difficulty":"medium","question":"Which Chinese philosopher founded Confucianism?","choices":["Confucius","Laozi","Zhuangzi","Mencius"],"answer":"Confucius"},
  {"continent":"Asia","region":"South Asia","difficulty":"medium","question":"Which Indian empire is noted for its classical achievements in art, science, and literature between the 4th and 6th centuries CE?","choices":["Gupta Empire","Maurya Empire","Mughal Empire","Chola Empire"],"answer":"Gupta Empire"},
  {"continent":"Asia","region":"Southeast Asia","difficulty":"easy","question":"Which Indonesian island was home to the Buddhist monument Borobudur?","choices":["Java","Sumatra","Borneo","Sulawesi"],"answer":"Java"},
  {"continent":"Asia","region":"Central Asia","difficulty":"hard","question":"The Silk Road connected China to which Mediterranean civilization?","choices":["Rome","Greece","Persia","Egypt"],"answer":"Rome"},
  {"continent":"Asia","region":"East Asia","difficulty":"easy","question":"Which Korean kingdom built the ancient site of Gyeongju and flourished in early medieval times?","choices":["Silla","Gaya","Baekje","Goguryeo"],"answer":"Silla"},
  {"continent":"Asia","region":"South Asia","difficulty":"hard","question":"Which famous South Asian mathematician-astronomer from Kerala computed series expansions centuries before Europe?","choices":["Madhava of Sangamagrama","Aryabhata","Brahmagupta","Bhaskara II"],"answer":"Madhava of Sangamagrama"},
  {"continent":"Europe","region":"Western Europe","difficulty":"medium","question":"Which English document signed in 1215 limited the power of the king?","choices":["Magna Carta","Bill of Rights","English Constitution","Habeas Corpus"],"answer":"Magna Carta"},
  {"continent":"Europe","region":"Eastern Europe","difficulty":"medium","question":"Which medieval state centered on Kyiv is considered a cultural ancestor of modern Russia and Ukraine?","choices":["Kievan Rus'","Novgorod Republic","Grand Duchy of Lithuania","Polish–Lithuanian Commonwealth"],"answer":"Kievan Rus'"},
  {"continent":"Europe","region":"Southern Europe","difficulty":"hard","question":"Which ancient Greek city-state hosted the Olympic Games?","choices":["Olympia","Athens","Sparta","Corinth"],"answer":"Olympia"},
  {"continent":"Europe","region":"Northern Europe","difficulty":"easy","question":"Which medieval conflict between England and France lasted from 1337 to 1453?","choices":["Hundred Years' War","War of the Roses","Napoleonic Wars","Thirty Years' War"],"answer":"Hundred Years' War"},
  {"continent":"Europe","region":"Western Europe","difficulty":"hard","question":"Which Renaissance artist painted the Sistine Chapel ceiling?","choices":["Michelangelo","Leonardo da Vinci","Raphael","Donatello"],"answer":"Michelangelo"},
  {"continent":"North America","region":"United States","difficulty":"easy","question":"Who was the primary author of the U.S. Declaration of Independence?","choices":["Thomas Jefferson","George Washington","Benjamin Franklin","John Adams"],"answer":"Thomas Jefferson"},
  {"continent":"North America","region":"Canada","difficulty":"hard","question":"Which treaty in 1763 ended the Seven Years' War and reshaped colonial possessions in North America?","choices":["Treaty of Paris","Treaty of Utrecht","Treaty of Versailles","Jay Treaty"],"answer":"Treaty of Paris"},
  {"continent":"North America","region":"Mesoamerica","difficulty":"medium","question":"Which pre-Columbian civilization built the city of Teotihuacan?","choices":["Teotihuacan culture","Aztec","Maya","Toltec"],"answer":"Teotihuacan culture"},
  {"continent":"North America","region":"Caribbean & Central America","difficulty":"medium","question":"Which island nation was the first Latin American country to gain independence from a European colonial power after a successful slave revolt?","choices":["Haiti","Cuba","Dominican Republic","Jamaica"],"answer":"Haiti"},
  {"continent":"South America","region":"Andes","difficulty":"hard","question":"Which city served as the capital of the Inca Empire?","choices":["Cusco","Quito","Lima","La Paz"],"answer":"Cusco"},
  {"continent":"South America","region":"Amazon","difficulty":"medium","question":"Which river is the largest by discharge volume in the world?","choices":["Amazon","Nile","Yangtze","Mississippi"],"answer":"Amazon"},
  {"continent":"South America","region":"Southern Cone","difficulty":"easy","question":"Which European colonial power controlled large parts of the Southern Cone including Argentina and Chile?","choices":["Spain","Portugal","France","Britain"],"answer":"Spain"},
  {"continent":"South America","region":"Andes","difficulty":"medium","question":"Which liberator led military campaigns that helped free Venezuela, Colombia, Ecuador, Peru, and Bolivia?","choices":["Simón Bolívar","José de San Martín","Bernardo O'Higgins","Antonio José de Sucre"],"answer":"Simón Bolívar"},
  {"continent":"Oceania","region":"Australia","difficulty":"hard","question":"Which penal colony was established at Port Jackson, later becoming the city of Sydney?","choices":["New South Wales","Van Diemen's Land","South Australia","Victoria"],"answer":"New South Wales"},
  {"continent":"Oceania","region":"Polynesia","difficulty":"medium","question":"Which island group includes Samoa, Tonga, and Tuvalu?","choices":["Polynesia","Micronesia","Melanesia","Austronesia"],"answer":"Polynesia"},
  {"continent":"Oceania","region":"Melanesia","difficulty":"easy","question":"Which large island north of Australia is home to the Papua New Guinean state?","choices":["New Guinea","Borneo","Sumatra","Sulawesi"],"answer":"New Guinea"},
  {"continent":"Africa","region":"North Africa","difficulty":"easy","question":"Which city on the Nile was a major center of Hellenistic learning founded by Alexander the Great?","choices":["Alexandria","Memphis","Thebes","Carthage"],"answer":"Alexandria"},
  {"continent":"Africa","region":"West Africa","difficulty":"medium","question":"Which ancient West African empire preceded Mali and controlled trans-Saharan trade?","choices":["Ghana Empire","Songhai Empire","Mali Empire","Kanem-Bornu"],"answer":"Ghana Empire"},
  {"continent":"Africa","region":"East Africa","difficulty":"hard","question":"Which ancient kingdom located in present-day Sudan was known for its pyramids at Meroe?","choices":["Kingdom of Kush","Axum","Ethiopia","Carthage"],"answer":"Kingdom of Kush"},
  {"continent":"Asia","region":"South Asia","difficulty":"easy","question":"Which religion originated in the Indian subcontinent and is associated with the Vedas and Upanishads?","choices":["Hinduism","Buddhism","Jainism","Sikhism"],"answer":"Hinduism"},
  {"continent":"Asia","region":"East Asia","difficulty":"hard","question":"Which dynasty reunified China in 581 CE after the period of disunion and preceded the Tang?","choices":["Sui Dynasty","Han Dynasty","Song Dynasty","Tang Dynasty"],"answer":"Sui Dynasty"},
  {"continent":"Asia","region":"Southeast Asia","difficulty":"medium","question":"Which trading kingdom centered on the island of Sumatra was influential from the 7th to 13th centuries?","choices":["Srivijaya","Khmer","Pagan","Majapahit"],"answer":"Srivijaya"},
  {"continent":"Europe","region":"Western Europe","difficulty":"easy","question":"Which French leader became emperor in 1804 after the French Revolution?","choices":["Napoleon Bonaparte","Louis XVI","Charlemagne","Louis XVIII"],"answer":"Napoleon Bonaparte"},
  {"continent":"Europe","region":"Eastern Europe","difficulty":"hard","question":"Which empire conquered Constantinople in 1453, ending the Byzantine Empire?","choices":["Ottoman Empire","Mongol Empire","Holy Roman Empire","Russian Empire"],"answer":"Ottoman Empire"},
  {"continent":"North America","region":"United States","difficulty":"medium","question":"Which conflict from 1861 to 1865 determined the survival of the United States as a single nation?","choices":["American Civil War","War of 1812","Revolutionary War","Mexican–American War"],"answer":"American Civil War"},
  {"continent":"North America","region":"Canada","difficulty":"easy","question":"Which explorer is credited with the first European landing on what is now Canada’s east coast in 1000 CE?","choices":["Leif Erikson","Columbus","Cabot","Cook"],"answer":"Leif Erikson"},
  {"continent":"South America","region":"Amazon","difficulty":"hard","question":"Which pre-Columbian site in the Amazon suggests complex societies in that region?","choices":["Kuhikugu","Moche","Chavín","Paracas"],"answer":"Kuhikugu"},
  {"continent":"South America","region":"Southern Cone","difficulty":"hard","question":"Which 20th-century leader in Chile led a military coup in 1973?","choices":["Augusto Pinochet","Salvador Allende","Juan Perón","Alberto Fujimori"],"answer":"Augusto Pinochet"},
  {"continent":"Oceania","region":"Australia","difficulty":"medium","question":"Which movement in 1854 in Victoria protested mining licensing and led to political reform?","choices":["Eureka Rebellion","Federation Movement","ANZAC Movement","White Australia Policy"],"answer":"Eureka Rebellion"},
  {"continent":"Oceania","region":"Polynesia","difficulty":"hard","question":"Which explorer is credited with first European contact with Hawaii in 1778?","choices":["James Cook","Captain Cook","Magellan","Tasman"],"answer":"James Cook"},
  {"continent":"Africa","region":"West Africa","difficulty":"easy","question":"Which group is known for building the ancient city of Benin with famous bronze plaques?","choices":["Edo people","Mali Empire","Ashanti","Yoruba"],"answer":"Edo people"},
  {"continent":"Africa","region":"East Africa","difficulty":"medium","question":"Which island off East Africa was famous as a trading entrepôt and later as a Tanzanian city?","choices":["Zanzibar","Madagascar","Pemba","Comoros"],"answer":"Zanzibar"},
  {"continent":"Asia","region":"Central Asia","difficulty":"easy","question":"Which famous Silk Road city was known as the home of scholars and traders, located in present-day Uzbekistan?","choices":["Samarkand","Bukhara","Khiva","Tashkent"],"answer":"Samarkand"},
  {"continent":"Asia","region":"East Asia","difficulty":"medium","question":"Which Korean alphabet was created in the 15th century under King Sejong?","choices":["Hangul","Hanja","Kana","Chữ Nôm"],"answer":"Hangul"},
  {"continent":"Europe","region":"Southern Europe","difficulty":"easy","question":"Which Italian city-state was the birthplace of the Renaissance and home to Leonardo da Vinci?","choices":["Florence","Venice","Rome","Milan"],"answer":"Florence"},
  {"continent":"Europe","region":"Northern Europe","difficulty":"hard","question":"Which Scandinavian country established a powerful medieval union under the Kalmar Union?","choices":["Denmark","Sweden","Norway","Finland"],"answer":"Denmark"},
  {"continent":"North America","region":"Mesoamerica","difficulty":"hard","question":"Which civilization created an accurate calendar and a writing system often studied by archaeologists?","choices":["Maya","Aztec","Inca","Olmec"],"answer":"Maya"},
  {"continent":"South America","region":"Andes","difficulty":"medium","question":"Which Spanish conquistador led the expedition that conquered the Inca Empire?","choices":["Francisco Pizarro","Hernán Cortés","Pedro de Valdivia","Vasco Núñez de Balboa"],"answer":"Francisco Pizarro"},
  {"continent":"Oceania","region":"Melanesia","difficulty":"medium","question":"Which European power colonized Fiji in the 19th century?","choices":["Britain","France","Germany","Spain"],"answer":"Britain"},
  {"continent":"Africa","region":"North Africa","difficulty":"hard","question":"Which Hellenistic library was once the largest in the ancient world, located in Egypt?","choices":["Library of Alexandria","Library of Pergamum","Library of Antioch","Library of Constantinople"],"answer":"Library of Alexandria"},
  {"continent":"Africa","region":"West Africa","difficulty":"hard","question":"Which river enabled trade and supported empires like Ghana, Mali, and Songhai?","choices":["Niger River","Nile River","Volta River","Congo River"],"answer":"Niger River"},
  {"continent":"Asia","region":"South Asia","difficulty":"medium","question":"Which South Asian empire is famous for rock-cut architecture like the Ajanta caves?","choices":["Gupta Empire","Maurya Empire","Chola Empire","Pallava Dynasty"],"answer":"Gupta Empire"},
  {"continent":"Asia","region":"Southeast Asia","difficulty":"hard","question":"Which Majapahit empire was a thalassocratic kingdom based on Java in the 13th–16th centuries?","choices":["Majapahit","Srivijaya","Sukhothai","Pagan"],"answer":"Majapahit"},
  {"continent":"Europe","region":"Western Europe","difficulty":"easy","question":"Which movement in the 16th century challenged the Catholic Church and led to Protestant branches?","choices":["Reformation","Renaissance","Enlightenment","Counter-Reformation"],"answer":"Reformation"},
  {"continent":"Europe","region":"Eastern Europe","difficulty":"medium","question":"Which empire expanded across much of Eastern Europe and the Middle East under the leadership of Suleiman the Magnificent?","choices":["Ottoman Empire","Mongol Empire","Persian Empire","Russian Empire"],"answer":"Ottoman Empire"},
  {"continent":"North America","region":"United States","difficulty":"hard","question":"Which U.S. amendment abolished slavery in 1865?","choices":["13th Amendment","14th Amendment","15th Amendment","1st Amendment"],"answer":"13th Amendment"},
  {"continent":"North America","region":"Canada","difficulty":"medium","question":"Which fur-trading company dominated trade and exploration in early Canada?","choices":["Hudson's Bay Company","North West Company","Compagnie des Indes","Royal African Company"],"answer":"Hudson's Bay Company"},
  {"continent":"South America","region":"Amazon","difficulty":"easy","question":"Which European explorer was the first to cross the Isthmus of Panama to the Pacific?","choices":["Vasco Núñez de Balboa","Christopher Columbus","Amerigo Vespucci","Ferdinand Magellan"],"answer":"Vasco Núñez de Balboa"},
  {"continent":"South America","region":"Southern Cone","difficulty":"medium","question":"Which country led the liberation of Chile and Argentina under Jose de San Martín?","choices":["Argentina","Chile","Peru","Bolivia"],"answer":"Argentina"},
  {"continent":"Oceania","region":"Australia","difficulty":"easy","question":"Which event commemorates Australian and New Zealand soldiers who fought at Gallipoli in WWI?","choices":["ANZAC Day","Australia Day","Remembrance Day","ANZAC Cove Day"],"answer":"ANZAC Day"},
  {"continent":"Oceania","region":"Polynesia","difficulty":"medium","question":"Which island chain includes Tahiti and Bora Bora?","choices":["Society Islands","Marquesas","Tuamotu","Cook Islands"],"answer":"Society Islands"},
  {"continent":"Africa","region":"East Africa","difficulty":"easy","question":"Which ancient port city was an important center for trade between Africa, Arabia, and India and is now the capital of Somalia?","choices":["Mogadishu","Kilwa","Zanzibar","Mombasa"],"answer":"Mogadishu"},
  {"continent":"Asia","region":"Central Asia","difficulty":"medium","question":"Which conqueror established the Timurid Empire in the late 14th century?","choices":["Tamerlane","Genghis Khan","Kublai Khan","Babur"],"answer":"Tamerlane"},
  {"continent":"Europe","region":"Southern Europe","difficulty":"hard","question":"Which Byzantine emperor codified Roman law in the Corpus Juris Civilis?","choices":["Justinian I","Heraclius","Constantine VII","Basil II"],"answer":"Justinian I"},
  {"continent":"North America","region":"Mesoamerica","difficulty":"easy","question":"Which civilization is credited with constructing the city of Tikal?","choices":["Maya","Aztec","Olmec","Toltec"],"answer":"Maya"},
  {"continent":"South America","region":"Andes","difficulty":"medium","question":"Which Spanish city became the colonial capital of Peru after the conquest?","choices":["Lima","Cusco","Quito","Potosí"],"answer":"Lima"},
  {"continent":"Oceania","region":"Melanesia","difficulty":"hard","question":"Which World War II battle involved Allied operations to capture an island chain including Guadalcanal?","choices":["Guadalcanal Campaign","Midway","Iwo Jima","Leyte Gulf"],"answer":"Guadalcanal Campaign"},
  {"continent":"Africa","region":"West Africa","difficulty":"easy","question":"Which West African kingdom was known for its ashanti golden stool and gold trade?","choices":["Ashanti","Mali","Ghana","Songhai"],"answer":"Ashanti"},
  {"continent":"Asia","region":"South Asia","difficulty":"easy","question":"Which Mauryan emperor famously converted to Buddhism and spread it across his realm?","choices":["Ashoka","Chandragupta","Bindusara","Harsha"],"answer":"Ashoka"},
  {"continent":"Europe","region":"Western Europe","difficulty":"medium","question":"Which scientist published the laws of motion and universal gravitation in the 17th century?","choices":["Isaac Newton","Galileo Galilei","Johannes Kepler","Tycho Brahe"],"answer":"Isaac Newton"},
  {"continent":"North America","region":"United States","difficulty":"medium","question":"Which U.S. president led the country during the majority of World War II?","choices":["Franklin D. Roosevelt","Harry S. Truman","Dwight D. Eisenhower","Woodrow Wilson"],"answer":"Franklin D. Roosevelt"},
  {"continent":"South America","region":"Amazon","difficulty":"hard","question":"Which ancient civilization in the Andes is known for the Nazca Lines?","choices":["Nazca culture","Moche","Chavín","Tiwanaku"],"answer":"Nazca culture"},
  {"continent":"Oceania","region":"Australia","difficulty":"hard","question":"Which Victorian era policy affected non-European immigration to Australia in the early 20th century?","choices":["White Australia Policy","Immigration Restriction Act","Citizenship Act","Pacific Solution"],"answer":"White Australia Policy"},
  {"continent":"Africa","region":"North Africa","difficulty":"medium","question":"Which city was founded by Alexander the Great and later became a major center of Hellenistic culture in Egypt?","choices":["Alexandria","Carthage","Memphis","Thebes"],"answer":"Alexandria"},
  {"continent":"Asia","region":"East Asia","difficulty":"easy","question":"Which island nation east of China adopted Buddhism, Confucianism, and its own samurai culture?","choices":["Japan","Korea","Philippines","Taiwan"],"answer":"Japan"},
  {"continent":"Europe","region":"Northern Europe","difficulty":"easy","question":"Which people from Scandinavia were known for raiding and trading across Europe from the 8th–11th centuries?","choices":["Vikings","Franks","Saxons","Angles"],"answer":"Vikings"},
  {"continent":"North America","region":"United States","difficulty":"hard","question":"Which document, ratified in 1788, established the framework of the United States federal government?","choices":["United States Constitution","Articles of Confederation","Declaration of Independence","Bill of Rights"],"answer":"United States Constitution"},
  {"continent":"South America","region":"Southern Cone","difficulty":"easy","question":"Which European language is the primary language of Brazil?","choices":["Portuguese","Spanish","French","English"],"answer":"Portuguese"},
  {"continent":"Oceania","region":"Polynesia","difficulty":"easy","question":"Which indigenous people are the tangata whenua (people of the land) of New Zealand?","choices":["Māori","Samoans","Fijians","Tongan"],"answer":"Māori"},
  {"continent":"Africa","region":"East Africa","difficulty":"medium","question":"Which Ethiopian kingdom adopted Christianity early and has ancient manuscripts and rock-hewn churches?","choices":["Aksum","Kush","Meroe","Gondar"],"answer":"Aksum"},
  {"continent":"Asia","region":"Central Asia","difficulty":"hard","question":"Which 19th-century rivalry between Britain and Russia for influence in Central Asia is called what?","choices":["The Great Game","The Silk Rivalry","The Steppe Struggle","The Khanate Wars"],"answer":"The Great Game"},
  {"continent":"Europe","region":"Western Europe","difficulty":"hard","question":"Which English king was forced to sign the Magna Carta in 1215?","choices":["King John","King Henry II","King Richard I","King Stephen"],"answer":"King John"},
  {"continent":"North America","region":"Canada","difficulty":"hard","question":"Which conference in 1864 helped lay the groundwork for Canadian Confederation in 1867?","choices":["Charlottetown Conference","Quebec Conference","London Conference","Ottawa Conference"],"answer":"Charlottetown Conference"},
  {"continent":"South America","region":"Andes","difficulty":"easy","question":"Which modern country contains the ancient city of Machu Picchu?","choices":["Peru","Ecuador","Chile","Bolivia"],"answer":"Peru"},
  {"continent":"Oceania","region":"Melanesia","difficulty":"easy","question":"Which island nation hosts the cultural region of Melanesia and includes Vanuatu and Fiji?","choices":["Melanesia region","Micronesia","Polynesia","Australasia"],"answer":"Melanesia region"},
  {"continent":"Africa","region":"West Africa","difficulty":"medium","question":"Which empire replaced Mali and became a dominant power in the 15th century controlling Saharan trade?","choices":["Songhai Empire","Ghana Empire","Mali Empire","Kanem-Bornu"],"answer":"Songhai Empire"},
  {"continent":"Asia","region":"South Asia","difficulty":"hard","question":"Which medieval South Asian mathematician approximated pi and worked on trigonometry?","choices":["Aryabhata","Brahmagupta","Bhaskara II","Madhava"],"answer":"Aryabhata"},
  {"continent":"Europe","region":"Eastern Europe","difficulty":"easy","question":"Which 20th-century event led to the dissolution of the Soviet Union in 1991?","choices":["Collapse of the USSR","Fall of Berlin Wall","Perestroika","Glasnost"],"answer":"Collapse of the USSR"}
]



function $(id){return document.getElementById(id)}

function loadQuestions(){
  // shuffle the master question list on load so quiz order is randomized each session
  const master = QUIZ_DATA.slice()
  shuffle(master)
  allQuestions = master
}

function getSelectedContinents(){
  return Array.from(document.querySelectorAll('.checkboxes input[type=checkbox]:checked')).map(i=>i.value)
}

function getSelectedDifficulty(){
  const r = document.querySelector('input[name="difficulty"]:checked')
  return r ? r.value : 'easy'
}

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]
  }
}

function stopTimer(){
  if(timerInterval){
    clearInterval(timerInterval)
    timerInterval = null
  }
}

function startTimer(){
  stopTimer()
  const q = quiz.questions[quiz.current]
  let timeLeft = TIMER_DURATIONS[q.difficulty] || 10
  const timerEl = $('timer')
  
  timerEl.classList.remove('warning','danger')
  timerEl.textContent = timeLeft + 's'
  
  timerInterval = setInterval(()=>{
    timeLeft--
    if(timeLeft<=0){
      stopTimer()
      timerEl.textContent = '0s'
      timerEl.classList.add('danger')
      // Disable choice selection
      Array.from(document.querySelectorAll('.choice')).forEach(ch=>ch.onclick=null)
      $('nextBtn').disabled = false
      return
    }
    timerEl.textContent = timeLeft + 's'
    // Add warning class when 5 seconds or less
    if(timeLeft<=5){
      timerEl.classList.add('warning')
    }
  },1000)
}

function startQuiz(){
  console.log('startQuiz() called')
  const continents = getSelectedContinents()
  console.log('Selected continents:', continents)
  const diff = getSelectedDifficulty()
  console.log('Selected difficulty:', diff)
  const num = parseInt($('numQuestions').value,10)
  console.log('Number of questions:', num)
  const filtered = allQuestions.filter(q=>continents.includes(q.continent) && q.difficulty===diff)
  console.log('Filtered questions:', filtered.length)
  if(filtered.length===0){alert('No questions match your selection. Try different filters.');return}
  shuffle(filtered)
  quiz.questions = filtered.slice(0,Math.min(num,filtered.length))
  quiz.current = 0
  quiz.score = 0
  quiz.answers = []
  console.log('Hiding controls, showing quiz')
  $('controls').classList.add('hidden')
  $('results').classList.add('hidden')
  $('quiz').classList.remove('hidden')
  $('total').textContent = quiz.questions.length
  renderQuestion()
}

function renderQuestion(){
  const q = quiz.questions[quiz.current]
  $('current').textContent = quiz.current+1
  $('questionText').textContent = `${q.question} (${q.region} — ${q.continent})`
  // images removed
  const choicesDiv = $('choices')
  choicesDiv.innerHTML = ''
  const displayedChoices = q.choices.slice()
  shuffle(displayedChoices)
  for(const c of displayedChoices){
    const btn = document.createElement('div')
    btn.className = 'choice'
    btn.textContent = c
    btn.onclick = ()=>selectChoice(btn,c,q.answer)
    choicesDiv.appendChild(btn)
  }
  $('nextBtn').disabled = true
  startTimer()
}

function selectChoice(elem,choice,correct){
  if($('nextBtn').disabled===false && quiz.current>=quiz.questions.length) return
  stopTimer()
  const children = Array.from(document.querySelectorAll('.choice'))
  children.forEach(ch=>ch.onclick=null)
  if(choice===correct){
    elem.classList.add('correct')
    quiz.score++
    quiz.answers.push({ok:true,choice,correct})
  } else {
    elem.classList.add('wrong')
    children.find(c=>c.textContent===correct)?.classList.add('correct')
    quiz.answers.push({ok:false,choice,correct})
  }
  $('nextBtn').disabled = false
}

function nextQuestion(){
  stopTimer()
  quiz.current++
  if(quiz.current>=quiz.questions.length){
    showResults()
  } else {
    renderQuestion()
  }
}

function showResults(){
  $('quiz').classList.add('hidden')
  $('results').classList.remove('hidden')
  const total = quiz.questions.length
  const correct = quiz.score
  const percent = Math.round((correct/total)*100)
  const breakdown = {}
  quiz.questions.forEach((q,i)=>{
    const cont = q.continent
    breakdown[cont] = breakdown[cont]||{total:0,correct:0}
    breakdown[cont].total++
    if(quiz.answers[i].ok) breakdown[cont].correct++
  })
  let html = `<p><strong>Score:</strong> ${correct} / ${total} (${percent}%)</p>`
  html += '<h3>By Continent</h3><ul>'
  for(const [c,v] of Object.entries(breakdown)){
    const p = Math.round((v.correct/v.total)*100)
    html += `<li>${c}: ${v.correct}/${v.total} (${p}%)</li>`
  }
  html += '</ul>'
  html += '<h3>Answers</h3><ol>'
  quiz.questions.forEach((q,i)=>{
    const a = quiz.answers[i]
    html += `<li>${q.question} — <strong>${a.ok? 'Correct':'Wrong'}</strong><br/>Your answer: ${a.choice} · Correct: ${a.correct}</li>`
  })
  html += '</ol>'
    // Study recommendations: gather wrongly answered questions grouped by continent
    const missed = {}
    quiz.questions.forEach((q,i)=>{
      const a = quiz.answers[i]
      if(!a || a.ok) return
      const cont = q.continent || 'General'
      missed[cont] = missed[cont] || []
      missed[cont].push(q.question)
    })

    html += '<h3>Study Recommendations</h3>'
    if(Object.keys(missed).length === 0){
      html += '<p>Great job — no specific weak topics detected. Review broadly to strengthen knowledge.</p>'
    } else {
      html += '<ul>'
      for(const [c, qs] of Object.entries(missed)){
        // show up to 6 example topics per continent
        const examples = qs.slice(0,6).map(s=>s.replace(/\"/g,'')).join('; ')
        html += `<li><strong>${c}:</strong> Review these topics — ${examples}</li>`
      }
      html += '</ul>'
      html += '<p>Tip: For each item above, read a short overview (Wikipedia or textbook), then revisit related questions.</p>'
    }

    $('summary').innerHTML = html
}

function restart(){
  $('controls').classList.add('hidden')
  $('results').classList.add('hidden')
}

window.addEventListener('DOMContentLoaded', ()=>{
  loadQuestions()
  
  // Landing page → controls
  $('startBtn').addEventListener('click', ()=>{
    $('landing').classList.add('hidden')
    $('controls').classList.remove('hidden')
  })
  
  // Back button
  $('backBtn').addEventListener('click', ()=>{
    $('controls').classList.add('hidden')
    $('landing').classList.remove('hidden')
  })
  
  // Start quiz
  const startQuizBtn = $('startQuizBtn')
  if(startQuizBtn){
    startQuizBtn.addEventListener('click', ()=>{
      console.log('Start Quiz clicked')
      startQuiz()
    })
  }
  $('nextBtn').addEventListener('click', nextQuestion)
  $('restartBtn').addEventListener('click', ()=>{
    $('results').classList.add('hidden')
    $('landing').classList.remove('hidden')
  })
})
  </script>
</body>
</html>